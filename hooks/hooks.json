{
  "description": "Ralpha-team hooks for orchestrated iterative loops with agent-teams",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "bash \"${CLAUDE_PLUGIN_ROOT}/scripts/session-init.sh\"",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/stop-hook.sh",
            "timeout": 120
          }
        ]
      }
    ],
    "TaskCompleted": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/task-completed-hook.sh",
            "timeout": 120
          }
        ]
      }
    ],
    "TeammateIdle": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/teammate-idle-hook.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Before context compaction, preserve Ralpha-Team orchestration state. First, re-read `.claude/ralpha-team.local.md` to get the current iteration number, mode (solo/team), completion promise phrase, and verification command. Then scan the conversation for active session context and return a systemMessage summary (max 150 words) covering whichever of these are present:\n\n1. **Iteration state** — current iteration number, max iterations, whether verification has ever passed\n2. **Verification status** — last verify-command output, pass/fail history\n3. **Task assignments** — which teammates own which files/tasks, what's completed vs in-progress\n4. **Teammate status** — which agents are active, idle, or finished\n5. **Current prompt** — the objective being looped on\n6. **Completion promise** — the exact promise phrase being matched\n7. **Open blockers** — any recurring failures or stuck patterns\n\nAfter compaction, re-read the state file to restore context.\n\nIf no Ralpha-Team session is active in this conversation, return nothing.",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
